<!doctype html>
<html lang="en">

<head>






<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
<meta name="generator" content="Orchid 0.21.1"/>
<link rel="icon" href="https://monkeypatch.io/kaval/favicon.ico">


<meta name="robots" content="index, follow">



<title>Kaval Arrow</title>


<meta name="description" content="Kaval is a validation DSL for your POJO.">





<!-- start:inject styles -->
<link rel="stylesheet" type="text/css" href="https://monkeypatch.io/kaval/Default/878a6be4/assets/css/kaval.css"  />
<link rel="stylesheet" type="text/css" href="https://monkeypatch.io/kaval/ajax/libs/prism/1.17.1/themes/prism-tomorrow.min.css"  />
<!-- end:inject styles -->



<script>
    window.site = {"orchidVersion":"0.21.1","baseUrl":"https://monkeypatch.io/kaval","environment":"prod","version":"0.6.0-SNAPSHOT"};
</script>


    <!-- start:inject meta-components [head] -->
    

        
            
        

        
            
        
    
    <!-- end:inject meta-components [head] -->



    <!-- start:inject meta-components [head] -->
    

        
            
        

        
            
        
    
    <!-- end:inject meta-components [head] -->









<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />

</head>

<body>
<header>

  <div class="logo">
    <a href="/">
      <figure class="image">
        <img src="https://monkeypatch.io/kaval/assets/logo/kaval.svg" alt="Kaval logo">
        <figcaption>Kaval</figcaption>
      </figure>
    </a>
  </div>

  <nav class="menu">
  
    <div class="separator">
      
        Getting Started
      
    </div>
  
    <div class="page">
      
        <a href="https://monkeypatch.io/kaval/samples">
          
            <i class="fas fa-code"></i>
          
          Samples
        </a>
      
    </div>
  
    <div class="separator">
      
        Modules
      
    </div>
  
    <div class="page">
      
        <a href="https://monkeypatch.io/kaval/kaval-core">
          
            <i class="fas fa-atom"></i>
          
          Kaval Core
        </a>
      
    </div>
  
    <div class="page">
      
        <a href="https://monkeypatch.io/kaval/kaval-arrow">
          
            <i class="fas fa-location-arrow"></i>
          
          Kaval Arrow
        </a>
      
    </div>
  
    <div class="page">
      
        <a href="https://monkeypatch.io/kaval/kaval-coroutine">
          
            <i class="fas fa-random"></i>
          
          Kaval Coroutine
        </a>
      
    </div>
  
    <div class="page">
      
        <a href="https://monkeypatch.io/kaval/kaval-kotest">
          
            <i class="fas fa-vial"></i>
          
          Kaval Kotest
        </a>
      
    </div>
  
    <div class="separator">
      
        Open Source
      
    </div>
  
    <div class="page">
      
        <a href="https://monkeypatch.io/kaval/license">
          
            <i class="fas fa-file-contract"></i>
          
          License
        </a>
      
    </div>
  
    <div class="page">
      
        <a href="https://monkeypatch.io/kaval/changelog">
          
            <i class="fas fa-history"></i>
          
          Changelog
        </a>
      
    </div>
  
    <div class="link">
      
        <a href="https://github.com/MonkeyPatchIo/kaval">
          
            <i class="fab fa-github"></i>
          
          Github
        </a>
      
    </div>
  
  </nav>

  <div class="flex-spacer"></div>

  <div class="version">
    Last version <a href="https://monkeypatch.io/kaval/changelog">0.6.0-SNAPSHOT</a>
  </div>

</header>

<main>
    <div class="content">
        
    <!-- start:inject components -->
    
        
            
                
                    
                        <h1 id="kaval-arrow"><a href="#kaval-arrow" id="kaval-arrow" class="anchor"></a>Kaval Arrow</h1>
<p><a href="https://arrow-kt.io">ArrowKt</a> is an awesome Kotlin functional library,
and this module provide some integration with this library.</p>
<h2 id="arrow-validated-vs-kaval-validation"><a href="#arrow-validated-vs-kaval-validation" id="arrow-validated-vs-kaval-validation" class="anchor"></a>Arrow Validated vs Kaval validation</h2>
<p>The Kaval approach is to provide an easy way to write and combine some validator, it's just a DSL.
On the other side, the <code>Validated</code> is based on the type category,
and implements some HKT like <strong>Functor</strong>, <strong>Applicative</strong>, <strong>Traverse</strong>, ...</p>
<p>Although these are two different approaches of validation, they are not in competition.
In my opinion, the idea would be to use Kaval as a DSL to easily declare validation rules,
and then if we need Arrow's ad hoc polymorphism,
to transform Kaval validators to provide <code>Validated</code> or <code>Either</code>.</p>
<p>Another noteworthy point is that Kaval is intended to be multi-platform.</p>
<h2 id="provided-validators"><a href="#provided-validators" id="provided-validators" class="anchor"></a>Provided Validators</h2>
<h3 id="optiont"><a href="#optiont" id="optiont" class="anchor"></a><code>Option&lt;T&gt;</code></h3>
<ul>
<li><code>isNoneOr(validator: () -&gt; Validator&lt;C&gt;)</code>: accept a <code>None</code>, or a valid <code>Some</code></li>
<li><code>isNone()</code>: require a <code>None</code>, probably not very useful</li>
<li><code>isSome()</code>: require a <code>Some</code>, probably not very useful</li>
</ul>
<h3 id="eitherl-r"><a href="#eitherl-r" id="eitherl-r" class="anchor"></a><code>Either&lt;L, R&gt;</code></h3>
<ul>
<li><code>validator(leftValidator: () -&gt; Validator&lt;L&gt;, rightValidator: () -&gt; Validator&lt;R&gt;)</code>: accept a valid <code>Either.Left</code>,
or a valid <code>Either.Right</code></li>
<li><code>isRight()</code>: require an <code>Either.Right</code></li>
<li><code>isRight(validator: () -&gt; Validator&lt;R&gt;)</code>: require a valid <code>Either.Right</code></li>
<li><code>isLeft()</code>: require an <code>Either.Left</code></li>
<li><code>isLeft(validator: () -&gt; Validator&lt;L&gt;)</code>: require an <code>Either.Left</code></li>
</ul>
<h3 id="iorl-r"><a href="#iorl-r" id="iorl-r" class="anchor"></a><code>Ior&lt;L, R&gt;</code></h3>
<ul>
<li><code>validator(leftValidator: () -&gt; Validator&lt;L&gt;, rightValidator: () -&gt; Validator&lt;R&gt;)</code>: accept a valid <code>Ior.Left</code>,
or a valid <code>Ior.Right</code>, or a valid <code>Ior.Both</code></li>
<li><code>isRight()</code>: require an <code>Ior.Right</code></li>
<li><code>isRight(validator: () -&gt; Validator&lt;R&gt;)</code>: require a valid <code>Ior.Right</code></li>
<li><code>isLeft()</code>: require an <code>Ior.Left</code></li>
<li><code>isLeft(validator: () -&gt; Validator&lt;L&gt;)</code>: require a valid <code>Ior.Left</code></li>
<li><code>isBoth()</code>: require an <code>Ior.Both</code></li>
<li><code>isLeft(leftValidator: () -&gt; Validator&lt;L&gt;, rightValidator: () -&gt; Validator&lt;R&gt;)</code>: require a valid <code>Ior.Both</code></li>
</ul>
<h3 id="nonemptylistt"><a href="#nonemptylistt" id="nonemptylistt" class="anchor"></a><code>NonEmptyList&lt;T&gt;</code></h3>
<ul>
<li><code>hasSize(size: Int)</code>: valid when size has a specific value</li>
<li><code>maxSize(size: Int)</code>: valid when size is lower or equals to a specific value</li>
<li><code>minSize(size: Int)</code>: valid when size is lower or equals to a specific value</li>
<li><code>allValid(elementValidator: () -&gt; Validator&lt;T&gt;)</code>: valid when all elements are valid.</li>
<li><code>atLeastOneValid(elementValidator: () -&gt; Validator&lt;T&gt;)</code>: valid when at least one element is valid.</li>
</ul>
<h2 id="validation-returning-a-validated"><a href="#validation-returning-a-validated" id="validation-returning-a-validated" class="anchor"></a>Validation returning a Validated</h2>
<p>The <code>KavalValidated</code> object provide some useful extension if you want to return an Arrow <code>Validated</code>.</p>
<p>A <code>ValidationResult</code> is isomorphic to <code>Validated&lt;Nel&lt;ValidationIssue&gt;, Unit&gt;</code>, you can use the
<code>ValidationResult.toValidated(): Validated&lt;Nel&lt;ValidationIssue&gt;, Unit&gt;</code> extension function
to map a validation result to an Arrow <code>Validated</code>.</p>
<p>The <code>Validator&lt;T&gt;.validateValidated(t: T): Validated&lt;Nel&lt;ValidationIssue&gt;, T&gt;</code> extension function can be used
to return the Arrow <code>Validated</code>.</p>
<p>And you can check an object with a validator like that:</p>
<pre><code class="language-kotlin">// Put the right check method into the scope
io.monkeypatch.kaval.arrow.KavalValidated.check

// A successful case
val addressOk = Address(
    line1 = &quot;42 avenue Monoid&quot;,
    line2 = &quot;Semigroup block&quot;,
    zipCode = 42000,
    city = &quot;LambdaCity&quot;
)

println(addressOk.check(Address.validator))
// Valid(Address(line1=42 avenue Monoid, line2=Semigroup block, zipCode=42000, city=LambdaCity))

// And a failure case
val addressKo = Address(
    line1 = &quot; &quot;.repeat(500),
    line2 = &quot;&quot;,
    zipCode = -1,
    city = &quot;&quot;
)

println(addressKo.check(Address.validator))
// (indented)
// Invalid(
//   NonEmptyList([
//     [line1] requires to be not blank,
//     [line1.length] requires to be lower or equals to 255, got 500,
//     [zipCode] requires to be greater than 0, got -1,
//     [city] requires to be not blank
//   ])
// )
</code></pre>
<h2 id="validation-returning-an-either"><a href="#validation-returning-an-either" id="validation-returning-an-either" class="anchor"></a>Validation returning an Either</h2>
<p>The <code>KavalEither</code> object provide some useful extension if you perfer returning an Arrow <code>Either</code>.</p>
<p>A <code>ValidationResult</code> is isomorphic to <code>Either&lt;InvalidException, Unit&gt;</code>, you can use the
<code>ValidationResult.toEither(): Either&lt;InvalidException, Unit&gt;</code> extension function
to map a validation result to an Arrow <code>Validated</code>.</p>
<p>The <code>Validator&lt;T&gt;.validateEither(t: T): Either&lt;InvalidException, T&gt;</code> extension function can be used
to return the Arrow <code>Validated</code>.</p>
<p>And you can check an object with a validator like that:</p>
<pre><code class="language-kotlin">// Put the right check method into the scope
io.monkeypatch.kaval.arrow.KavalEither.check

// A successful case
val addressOk = Address(
    line1 = &quot;42 avenue Monoid&quot;,
    line2 = &quot;Semigroup block&quot;,
    zipCode = 42000,
    city = &quot;LambdaCity&quot;
)

println(addressOk.check(Address.validator))
// Right(Address(line1=42 avenue Monoid, line2=Semigroup block, zipCode=42000, city=LambdaCity))

// And a failure case
val addressKo = Address(
    line1 = &quot; &quot;.repeat(500),
    line2 = &quot;&quot;,
    zipCode = -1,
    city = &quot;&quot;
)

println(addressKo.check(Address.validator))
// Left(InvalidException(invalid=Invalid:
//  - [line1] requires to be not blank
//  - [line1.length] requires to be lower or equals to 255, got 500
//  - [zipCode] requires to be greater than 0, got -1
//  - [city] requires to be not blank))
</code></pre>

                    
                
            
        
    
    <!-- end:inject components -->


    </div>
</main>
<footer>

  <div class="orchid">
    Build with <a href="https://orchid.run"><img alt="Orchid" src="https://monkeypatch.io/kaval/assets/logo/orchid.svg"></a>
  </div>
  <div class="flex-spacer"></div>
  <div class="love">We ❤️ Chocolatines</div>

</footer>

<!-- start:inject scripts -->
<script data-selector="pre code[class='language-run-kotlin']" src="https://monkeypatch.io/kaval/kotlin-playground@1"></script>
<script  src="https://monkeypatch.io/kaval/ajax/libs/prism/1.17.1/prism.min.js"></script>
<script  src="https://monkeypatch.io/kaval/ajax/libs/prism/1.17.1/components/prism-clike.min.js"></script>
<script  src="https://monkeypatch.io/kaval/ajax/libs/prism/1.17.1/components/prism-kotlin.min.js"></script>
<!-- end:inject scripts -->



</body>

</html>
